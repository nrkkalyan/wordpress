jQuery(document).ready(function(a){"use strict";function b(a,b){a=escape(a),b=escape(b);var c=document.location.search,d=a+"="+b,e=new RegExp("(&|\\?)"+a+"=[^&]*");return c=c.replace(e,"$1"+d),RegExp.$1||(c+=(c.length>0?"&":"?")+d),c}function d(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return""}function e(a){var b=a.data("hide");if("undefined"!=typeof b){var c=d(yith_woocompare.cookie_name),e=c?JSON.parse(c):"";e.length?a.closest(".yith-woocompare-widget").show():a.closest(".yith-woocompare-widget").hide()}}function f(){var b=a(".yith-woocompare-widget ul.products-list"),c=b.data("lang");if(b.length){e(b);var d={action:yith_woocompare.actionreload,context:"frontend",lang:c};"undefined"!=typeof a.fn.block&&b.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare_premium.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),a.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionreload),data:d,success:function(c){"undefined"!=typeof a.fn.block&&b.unblock(),b.html(c)}})}}a(document).on("click",".product a.compare:not(.added)",function(b){b.preventDefault();var j,c=a(this),d=a(".yith-woocompare-widget ul.products-list"),g=c.parents("#yith-woocompare-related"),h=!!g.length,i=!!h&&g.data("iframe");j={action:yith_woocompare.actionadd,id:c.data("product_id"),context:"frontend",is_related:h,iframe:i},"undefined"!=typeof a.fn.block&&(c.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare_premium.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),d.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare_premium.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}})),a.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionadd),data:j,dataType:h?"html":"json",success:function(b){if(h){var g=a("#yith-woocompare");g.replaceWith(a(b).filter("#yith-woocompare")),f(),a(document).trigger("yith_woocompare_page_refreshed",[!1])}else c.addClass("added").attr("href",b.table_url).text(yith_woocompare_premium.is_page?yith_woocompare_premium.view_label:yith_woocompare.added_label),e(d),d.html(b.widget_table),"yes"!=yith_woocompare.auto_open||b.only_one||yith_woocompare_premium.is_page||a("body").trigger("yith_woocompare_open_popup",{response:b.table_url,button:c});"undefined"!=typeof a.fn.block&&(c.unblock(),d.unblock())}})}),yith_woocompare_premium.is_page||a(document).on("click",".product a.compare.added",function(b){b.preventDefault();var c=this.href;"undefined"!=typeof c&&a("body").trigger("yith_woocompare_open_popup",{response:c,button:a(this)})}),a("body").on("yith_woocompare_open_popup",function(b,d){var e=d.response;d.button;a(window).width()>=768?(a.colorbox({href:e,iframe:!0,width:"80%",height:"80%",fixed:!0,className:"yith_woocompare_colorbox",onClosed:function(){yith_woocompare_premium.im_in_page?location.reload():f()},onComplete:function(){c(),a.dataTableFunction()}}),a(window).resize(function(){a.colorbox.resize({width:"90%",height:"90%"})})):window.location=yith_woocompare_premium.page_url}),a(document).on("click",".remove a",function(b){b.preventDefault();var c=a(this),d={action:yith_woocompare.actionremove,id:c.data("product_id"),iframe:c.data("iframe"),context:"frontend"};"undefined"!=typeof a.fn.block&&c.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare_premium.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),a.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionremove),data:d,dataType:"html",success:function(b){var d=a(b).filter("#yith-woocompare");a("#yith-woocompare").replaceWith(d),a('.compare[data-product_id="'+c.data("product_id")+'"]',window.parent.document).removeClass("added").html(yith_woocompare_premium.button_text),f(),a(document).trigger("yith_woocompare_product_removed",[""])}})}),a(".yith-woocompare-open a, a.yith-woocompare-open").on("click",function(c){c.preventDefault(),a("body").trigger("yith_woocompare_open_popup",{response:b("action",yith_woocompare.actionview)+"&iframe=1"})}),a(".yith-woocompare-widget").on("click","a.compare",function(b){yith_woocompare_premium.is_page||(b.preventDefault(),a("body").trigger("yith_woocompare_open_popup",{response:a(this).attr("href")}))}).on("click","li a.remove, a.clear-all",function(b){b.preventDefault();var c=a(".yith-woocompare-widget .products-list").data("lang"),d=a(this),f=d.data("product_id"),g={action:yith_woocompare.actionremove,id:f,context:"frontend",responseType:"product_list",lang:c},h=d.parents(".yith-woocompare-widget").find("ul.products-list");"undefined"!=typeof a.fn.block&&h.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare_premium.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),a.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionremove),data:g,dataType:"html",success:function(b){var c=a("#yith-woocompare");c.length&&a.get(window.location,function(b){var d=a(b).find("#yith-woocompare");c.replaceWith(d),a(document).trigger("yith_woocompare_page_refreshed",[d])}),e(h),h.html(b),"undefined"!=typeof a.fn.block&&h.unblock(),"all"==f?a(".compare.added").removeClass("added").html(yith_woocompare_premium.button_text):a('.compare[data-product_id="'+f+'"]').removeClass("added").html(yith_woocompare_premium.button_text)}})}),a(document).on("click","#yith-woocompare-cat-nav li > a",function(b){b.preventDefault();var c=a(this),d=c.closest("#yith-woocompare"),e=c.data("cat_id"),f=c.closest("#yith-woocompare-cat-nav > ul"),g=f.data("product_ids"),h=f.data("iframe");a.ajax({url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare_premium.actionfilter),data:{action:yith_woocompare_premium.actionfilter,yith_compare_cat:e,yith_compare_prod:g,context:"frontend",iframe:h},dataType:"html",success:function(b){var c=a(b).filter("#yith-woocompare");d.replaceWith(c),a(document).trigger("yith_woocompare_page_refreshed",[c])}})});var c=function(){if("undefined"!=typeof a.fn.owlCarousel){var b=a("#yith-woocompare-related"),c=b.find(".related-products"),d=b.find(".related-slider-nav");if(!b.length)return;c.owlCarousel({autoplay:yith_woocompare_premium.autoplay_related,autoplayHoverPause:!0,loop:!0,margin:15,responsiveClass:!0,responsive:{0:{items:2},480:{items:3},768:{items:yith_woocompare_premium.num_related}}}),d.length&&(d.find(".related-slider-nav-prev").click(function(){c.trigger("prev.owl.carousel")}),d.find(".related-slider-nav-next").click(function(){c.trigger("next.owl.carousel")}))}};c(),a(document).on("yith_woocompare_product_removed yith_woocompare_page_refreshed",c),a.dataTableFunction=function(b){var d,c=b&&b.length?b:a(document).find("#yith-woocompare table.compare-list");c.length&&"undefined"!=typeof a.fn.DataTable&&"undefined"!=typeof a.fn.imagesLoaded&&c.each(function(){var b=a(this);b.imagesLoaded(function(){d=b.DataTable({info:!1,scrollX:!0,scrollCollapse:!0,paging:!1,ordering:!1,searching:!1,autoWidth:!1,destroy:!0}),new a.fn.dataTable.FixedColumns(d,{leftColumns:yith_woocompare_premium.fixedcolumns})})})},a.dataTableFunction(!1),a(document).on("yith_woocompare_product_removed yith_woocompare_page_refreshed",function(b,c){var d=!!c&&a(c).find("table.compare-list");a.dataTableFunction(d)}),a("body").on("added_to_cart",function(b,c,d,e){a(e).closest("table.compare-list").length&&e.hide()}),e(a(".yith-woocompare-widget ul.products-list"))});