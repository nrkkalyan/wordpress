function ywpc_resize_thickbox(){var e=400,t=400,a=jQuery("#TB_window"),n=jQuery("#TB_iframeContent"),c=jQuery("#wpadminbar"),i=jQuery(window).width(),o=jQuery(window).height(),r=0;c.length&&(r=parseInt(c.css("height"),10));var _=e+50>i?i-50:e,d=t+45+r>o?o-45-r:t;a.css({marginLeft:-(_/2),marginTop:-(d/2),top:"50%",width:_,height:d}),n.css({padding:"10px",width:_-20,height:d-50})}jQuery(function(e){function t(t){var a={allowClear:t.data("allow_clear")?!0:!1,placeholder:t.data("placeholder"),minimumInputLength:t.data("minimum_input_length")?e(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",quietMillis:250,data:function(e,a){return{term:e,action:t.data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce}},results:function(t,a){var n=[];return t&&e.each(t,function(e,t){n.push({id:e,text:t})}),{results:n}},cache:!0}};t.data("multiple")===!0?(a.multiple=!0,a.initSelection=function(t,a){var n=e.parseJSON(t.attr("data-selected")),c=[];return e(t.val().split(",")).each(function(e,t){c.push({id:t,text:n[t]})}),a(c)},a.formatSelection=function(e){return'<div class="selected-option" data-id="'+e.id+'">'+e.text+"</div>"}):(a.multiple=!1,a.initSelection=function(e,t){var a={id:e.val(),text:e.attr("data-selected")};return t(a)}),a=e.extend(a,n()),t.select2(a).addClass("enhanced")}function a(){e(".woocommerce_variation").addClass("variation-needs-update"),e(".save-variation-changes").removeAttr("disabled"),e(".cancel-variation-changes").removeAttr("disabled")}var n=function(){var e={formatMatches:function(e){return 1===e?wc_enhanced_select_params.i18n_matches_1:wc_enhanced_select_params.i18n_matches_n.replace("%qty%",e)},formatNoMatches:function(){return wc_enhanced_select_params.i18n_no_matches},formatAjaxError:function(e,t,a){return wc_enhanced_select_params.i18n_ajax_error},formatInputTooShort:function(e,t){var a=t-e.length;return 1===a?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",a)},formatInputTooLong:function(e,t){var a=e.length-t;return 1===a?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",a)},formatSelectionTooBig:function(e){return 1===e?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e)},formatLoadMore:function(e){return wc_enhanced_select_params.i18n_load_more},formatSearching:function(){return wc_enhanced_select_params.i18n_searching}};return e},c=function(){e(":input.ywpc-wc-product-search, :input.ywpc-wc-category-search").filter(":not(.enhanced)").each(function(){t(e(this))})};e("body").on("ywpc-wc-enhanced-select-init",function(){c()}).trigger("ywpc-wc-enhanced-select-init"),e(document).on("widget-updated",function(e,t){c()}),e(document).on("widget-added",function(a,n){var c=n.find("input.ywpc-wc-product-search");c.removeClass("enhanced");var i=n.find("div.select2-container");i.remove(),c.length>0&&c.each(function(){t(e(this))})});var i=e("#_ywpc_sale_price_dates_from, #_ywpc_sale_price_dates_to");i.datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,onSelect:function(t){var a=e(this).is("#_ywpc_sale_price_dates_from")?"minDate":"maxDate",n=e(this).data("datepicker"),c=e.datepicker.parseDate(n.settings.dateFormat||e.datepicker._defaults.dateFormat,t,n.settings);i.not(this).datepicker("option",a,c)}}),e(document).ready(function(){e("#_ywpc_enabled").change(function(){e(this).is(":checked")?(e("#_ywpc_sale_price_dates_from").removeAttr("disabled"),e("#_ywpc_sale_price_dates_to").removeAttr("disabled"),e("#_ywpc_discount_qty").removeAttr("disabled"),e("#_ywpc_sold_qty").removeAttr("disabled"),e("#_ywpc_variations_global_countdown").removeAttr("disabled"),e(".ywpc-variation-field").each(function(){e(this).removeAttr("disabled")})):(e("#_ywpc_sale_price_dates_from").attr("disabled","disabled").val(""),e("#_ywpc_sale_price_dates_to").attr("disabled","disabled").val(""),e("#_ywpc_discount_qty").attr("disabled","disabled").val(""),e("#_ywpc_sold_qty").attr("disabled","disabled").val(""),e("#_ywpc_variations_global_countdown").attr("disabled","disabled").val(""),e(".ywpc-variation-field").each(function(){e(this).attr("disabled","disabled").val("")})),a()}).change(),e("#_ywpc_variations_global_countdown").change(function(){e(this).is(":checked")?e(".ywpc-variation-field").each(function(){e(this).attr("disabled","disabled").val("")}):(e(".woocommerce_variation .ywpc_sale_price_dates_from").removeAttr("disabled").val(e("#_ywpc_sale_price_dates_from").val()),e(".woocommerce_variation .ywpc_sale_price_dates_to").removeAttr("disabled").val(e("#_ywpc_sale_price_dates_to").val()),e(".woocommerce_variation .ywpc_discount_qty").removeAttr("disabled").val(e("#_ywpc_discount_qty").val()),e(".woocommerce_variation .ywpc_sold_qty").removeAttr("disabled").val(e("#_ywpc_sold_qty").val())),a()}).change(),e("#_ywpc_discount_qty").change(function(){e("#_ywpc_variations_global_countdown").is(":checked")||(e(".ywpc_discount_qty").val(e(this).val()),a())}).change(),e("#_ywpc_sold_qty").change(function(){e("#_ywpc_variations_global_countdown").is(":checked")||(e(".ywpc_sold_qty").val(e(this).val()),a())}).change()}),e(window).resize(function(){ywpc_resize_thickbox()}),e("li.product_countdown_tab a").on("click",function(){e("#variable_product_options").trigger("reload")}),e("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){var t=e("#woocommerce-product-data");e(".ywpc-dates",t).each(function(){var t=e(this).find("input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,onSelect:function(a){var n=e(this).is(".ywpc_sale_price_dates_from")?"minDate":"maxDate",c=e(this).data("datepicker"),i=e.datepicker.parseDate(c.settings.dateFormat||e.datepicker._defaults.dateFormat,a,c.settings);t.not(this).datepicker("option",n,i),e(this).change(),e(".woocommerce_variation").addClass("variation-needs-update")}})}),e(".ywpc-variation-field").each(function(){e("#_ywpc_variations_global_countdown").is(":checked")||!e("#_ywpc_enabled").is(":checked")?e(this).attr("disabled","disabled"):e(this).removeAttr("disabled")})}),e("#ywpc_before_sale_start").change(function(){var t=e("#ywpc_before_sale_start_status").parent().parent().parent().parent();e(this).is(":checked")?t.show():t.hide()}).change()});